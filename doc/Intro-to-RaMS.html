<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Intro to RaMS</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Intro to RaMS</h1>



<!-- This vignette is created from a .Rmd file: please edit that instead. -->
<p><strong>Table of contents:</strong></p>
<ul>
<li><strong><a href="#basic-rams-usage">Basic RaMS usage</a></strong>
<ul>
<li><a href="#tics-bpcs-and-metadata">TICs, BPCs, and metadata</a></li>
<li><a href="#adding-a-column-ms1-data">Adding a column: MS1 data</a></li>
<li><a href="#moving-along-ms2-data">Moving along: MS2 data</a></li>
</ul></li>
<li><strong><a href="#advanced-rams-usage">Advanced RaMS usage</a></strong>
<ul>
<li><a href="#saving-space-eics-and-rtrange">Saving space: EICs and rtrange</a></li>
<li><a href="#speeding-things-up">Speeding things up</a></li>
<li><a href="#finer-control-grabmzmldata-grabmzxmldata">Finer control: grabMzmlData, grabMzxmlData</a></li>
<li><a href="#the-nitty-gritty-details">The nitty-gritty details</a></li>
<li>[Minified file details]</li>
</ul></li>
</ul>
<div id="basic-rams-usage" class="section level2">
<h2>Basic RaMS usage</h2>
<p>Welcome to <code>RaMS</code>! This vignette is designed to provide examples using the package at various levels of complexity. Let’s jump right in.</p>
<p>If you have your own data, feel free to load it here. If not, there’s a couple small example files you’re welcome to use in the “extdata” folder. The first of these contains DDA data from a pooled sample, while the others are individual samples. I’ll be using these throughout. For more details on the origin of these files, see the <a href="doc/Minifying-files-with-RaMS.html">minification vignette</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RaMS)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Locate the file directory</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>msdata_dir <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="at">package =</span> <span class="st">&quot;RaMS&quot;</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify the files of interest</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>data_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(msdata_dir, <span class="at">pattern =</span> <span class="st">&quot;mzML&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Check that the files identified are the ones expected</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">basename</span>(data_files)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;DDApos_2.mzML.gz&quot;  &quot;LB12HL_AB.mzML.gz&quot; &quot;LB12HL_CD.mzML.gz&quot;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4] &quot;LB12HL_EF.mzML.gz&quot;</span></span></code></pre></div>
<p>There’s only one function to worry about in <code>RaMS</code>: the aptly named <code>grabMSdata</code>. This function has a couple arguments with sensible defaults, but you’ll always need to tell it two things: one, which files you’d like to process; and two, the data you’d like to obtain from those files.</p>
<p>Let’s start simple, with a single file and the most basic information about it.</p>
<div id="tics-bpcs-and-metadata" class="section level3">
<h3>TICs, BPCs, and metadata</h3>
<p>A TIC reports the total intensity measured by the mass analyzer during each scan, so the data is parsed into two columns: retention time (rt) and intensity (int). This makes it easy to read and simple to plot:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>single_file <span class="ot">&lt;-</span> data_files[<span class="dv">2</span>]</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>msdata <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(single_file, <span class="at">grab_what =</span> <span class="st">&quot;TIC&quot;</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading file LB12HL_AB.mzML.gz... 0.13 secs </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading TIC...0.08 secs </span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Total time: 0.2 secs</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(msdata<span class="sc">$</span>TIC, <span class="dv">3</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">rt</th>
<th align="right">int</th>
<th align="left">filename</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4.000483</td>
<td align="right">14026215</td>
<td align="left">LB12HL_AB.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">4.016333</td>
<td align="right">14246513</td>
<td align="left">LB12HL_AB.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">4.032667</td>
<td align="right">13659517</td>
<td align="left">LB12HL_AB.mzML.gz</td>
</tr>
</tbody>
</table>
<p>Since we asked for a single thing, the TIC, our <code>file_data</code> object is a list with a single entry: the TIC. Let’s plot that data:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(msdata<span class="sc">$</span>TIC<span class="sc">$</span>rt, msdata<span class="sc">$</span>TIC<span class="sc">$</span>int, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<p>Simple enough!</p>
<p>A BPC is just like a TIC except that it records the <em>maximum</em> intensity measured, rather than the sum of all intensities. This data is also collected by the mass analyzer and doesn’t need to be calculated.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>msdata <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(single_file, <span class="at">grab_what =</span> <span class="st">&quot;BPC&quot;</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading file LB12HL_AB.mzML.gz... 0.12 secs </span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading BPC...0.06 secs </span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Total time: 0.19 secs</span></span></code></pre></div>
<p>Since the data is parsed in a <a href="https://r4ds.had.co.nz/tidy-data.html">“tidy” format</a>, it plays nicely with popular packages such as <code>ggplot2</code>. Let’s use that to plot our BPC instead of the base R plotting system:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msdata<span class="sc">$</span>BPC) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>int))</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<p>The advantages of tidy data and <code>ggplot</code> become clear when we load more than one file at a time because we can group and color by the third column, the name of the file from which the data was read. <code>RaMS</code> will also automatically enable a loading bar if more than one file is loaded; this can be disabled by setting the <code>verbosity</code> parameter to 0.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>msdata <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>], <span class="at">grab_what =</span> <span class="st">&quot;BPC&quot;</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">|=======================</span>                                               <span class="er">|</span>  <span class="dv">33</span>%</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="er">|===============================================</span>                       <span class="er">|</span>  <span class="dv">67</span>%</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Total time: 0.56 secs</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msdata<span class="sc">$</span>BPC) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>int, <span class="at">color=</span>filename))</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnAAAAEgCAMAAAADq777AAABBVBMVEUAAAAAADoAAGYAOmYAOpAAZpAAZrYAujgzMzM6AAA6ADo6AGY6OpA6ZmY6ZpA6ZrY6kNtNTU1NTW5NTY5NbqtNjshhnP9mAABmADpmAGZmOjpmOpBmZjpmZmZmZrZmtv9uTU1uTW5uTY5ubqtuq8huq+SOTU2OTW6OTY6ObquOyP+QOgCQOjqQOmaQZpCQkDqQkGaQtpCQ27aQ2/+rbk2rbm6rbo6rjk2ryKur5P+2ZgC2Zjq2tma225C22/+2/9u2///Ijk3I///bkDrbkGbb/7bb///kq27k///r6+vy8vL4dm3/tmb/yI7/25D/27b/29v/5Kv//7b//8j//9v//+T///9oubtwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAPn0lEQVR4nO2dC3vbSBWGnVLipuESJ62zLCzphSTF6cJ2kxYcWLZxIK7rCziO9f9/CnOTJdkaZcYenRlL3/uAdTsWp5qXM2PFIzciAAhp+E4A1AsIB0iBcIAUCAdIgXCAFAgHSHEr3KCYx46vHVzaicPIYiXWaaPRAuG2IAsIpyOYFqlWFhBORzAtUq0sIJyOYFqkWllAOB3BtEi1soBwOoJpkWplAeF0BNMi1coCwukIpkWqlQWE0xFMi1QrCwinI5gWqVYWEE5HMC1iGdwOIgvzWKeNRguEYwwhHBkQbgDhKIFwAwhHCYTjvkE4MvAFzChiwvlOoT6gwqHCkQLhIBwpEA7CkQLhIBwpEA7CkQLhBoM2hKMDwkE4UiAchCMFwkE4UiAchCMFwjHhmhCODAgH4UiBcEw4fD2JDggH4UiBcBCOFAgH4UiBcIMhhCMEwkE4UiDcoN3GvFQ6IByEIwXCQThSIBwXTv+nBgjnGAgH4UiBcBCOFAg3aDchHB0QDsKRoheu3+J04tWj3tLx2VnrxZcomr5KHQqmRWyCmWwQjoziCjfmSkXRTWf10PyqE/VfRrPzbtSXUdF2CjeEcJQUCsdtYsw/duXmmSxms3c9+TJ905u+/SK3BcG0iEUwhCOlUDhWwThMNNG33pzKPUIwYdp5N6lwzxgECTtn2I6iZtt3FrWhSDhV4KLp6y6vcnyTuTYWY7tT3tuKPXIoJwmmBFgEo8KRUiTcODGJj+NEoTvsZiscl3F8hC510yzsYss0omSKhGNdaGqjsxiqpcdwcaGTBNMiFsEQjpQC4eLPCqLSzT/1uIBJ0ZtfiREdKpybLOxiSxSibAqEk4WLVTF+H050pWdiER+Wg7dxK7UzmBaxCIZwpOAvDVy4IYSjAsJBOFIgHIQjBcJBOFIgHIQjBcJBOFIgHIQjBcIJ2SAcFRAOwpEC4SAcKRAOwpEC4SAcKRCu3RxAODogHIQjBcJBOFIgXHvx4jMLu1injUYLhINwpEA4CEcKhINwpEA4CEcKhINwpEA4CEcKhINwpEA4CEeKW+G2kfbiZeu5bex8eH45eX7pO5ECUOGqU+Huj0/4AsJ5aBGL4OoIp0yDcB5axCK4MsJN9hqN3YnsUh8uGo0nn5l7H9jOE3mscaC2DyZypwqiBcJVRjhR2qRwDxe7bET39G6y9/Quun3yWXS2bCm3G3JnHOTUgEepvXBD4Zr28UnbKdyIFy5m2WTvROz+3508LLfVzjjIqQGPAuGqKNxtQ3AghnPiZcQ2dy6T7VSQUwMeBcJVUjjVUcZu3R/vxIdSwlH3pgIIV0XhRjuXiz2i9+RujZYqXBxEC4SronAPF8ywlGDcrcneknBxkFMDHgXCVVE4ccdD9qJy9zXb/JF9iEgLFwfRAuGqI9xWAOHayau/LCxjnTYaLRAOwpEC4SAcKRAOwpEC4SAcKRAOwpEC4aoj3Nd8nLbwxkA4CEcKhINwpEA4CEcKhINwpEA4CEcKhINwpNReOPHEVQhHBoSDcKQUCNdvtVpHPb6mft4+i9o5faWCOMG0iHlwbYSb7IspqGKGauNksUfOUZUH2auKWnD/zWXmPctM9nbZ6/WTlTfqKBDupqNW5ledqP9y6ajaOTvvRv2FjcG0iHlw7YQTlsmJXE8+C6H4t4R1wo2+O0i/Z4XJ89/cRfffrr5Rh164+ceuWpu960XTNz1e00Qx49vxzunbL3Ibwm2RcA/vL6PrnQ9sdSQK1IlOuIf3P/7+LnkPf/2h0TgY8dmF1w0+03//D8zY7zJvvD9u/OLbS3HYRjimV6slipyQilWym1NZ6IRgamdS4Z4xtCcLl3ZTLvxm4YSvX4craCrcr+6SPbzK6YRjgdcn6ffw6fq8G40dnOz/8yT694fMG68P5NwcqegSeuGmr7uqyo1fLNxiro1bnFO1Mzu+C6YEmAfLCqd91kP1KpwYjz1NCfdwcaD2NlaGYrcHvAam3sMl4v8VYzt2dLL/028fvv8pLdz97z5L127z5lg/8ilVjOPiYsZL3mE3W+G4luOjre9SayScKE0XJ4s998fxKG21wvF5XbGF8j1p4XjNm+z//Jf//DHzRr6bh8iSuI5wari2GKqlx3Bxodte4TILX1lYxm4qHBu1xaviSSM64YQz8Qjvekk4UcXYoX/8cDDJqXC5HWqRcFyl+Sfu2PxKDt7YGG686D7Vzu2vcJmFrywsYzcVTnSIYlX6phPulh8c7abekxJO9JjsEJ9wnTOGy+1Qs8KpJ+mM1DPD+qIDVR9PuWhscdhdRKud41ZqZzAtYh5cH+HEQGx36T6cfKJN6lOqjJJvefhe9LnffFDvYccT4X485jt/LVRL3shPxD6l/vK9PLwqXYFwaxBMi5gH10Y4UvR35RLh1NOb8u+eGBJMi5gHQ7gc1IfW9Z4DUfwEiZwKtwHBtIh5MISjBX+8zyx8ZWEZm3/1t0+4xe2/dc8WTIuYB0M4WtLCiacMb0QwLWIeDOFowRgus/CVhWVs/tXfOuHkHy82IZgWMQ+GcLRkxnAb3IGTBNMi5sEQjpZsl9rAhwY/WVjG5l/9rRNuc4JpEfNgCEcLhMssfGVhGZt/9bdLOPYRFV2qtywsY/Ov/nYJ54RgWsQ8GMLRAuEyC19ZWMbmX/1i4dabJjiS3y0vmChoOVOw7sINayec1TTBWz68un56J7+Cmf+HAbuZghBOLuslnOk0QfUt34v4uJy4tdFMQQgnl9UQrrmCpsIZThMcxT84qObbKP82mSkI4eRS99tH2yWc8RjOcJrgaDfz5ngu9CYzBSGcXNZHOJtpgouZfpkKt9FMQQiXXfrJwjY2/+qbC2c6TXBpDDdangu9xkxBCJdd+snCNjb/6psLZzpNMPdT6mYzBSFcduknC9vY/Kv/iHD20wSj1ftwG88UhHDZpZ8sbGPXEY4azV05t8JtH8N2drnNuBNuo2mCUeFMQVS47NJPFrax+Vc/rAqnAcJll36ysI3Nv/oQzl+LGAdDOGIgXHbpJwvb2PyrD+H8tYhxMIQjBsJll36ysI3Nv/oQzl+LGAdDOGIgXHbpJwvb2PyrD+H8tYhxMIQjBsJll36ysI3Nv/oQzl+LGAdDOGIgXHbpJwvb2PyrD+H8tYhx8EK0ygu3zjRBGbxzKZd5z8F3+WuCaxBMixgH1084m2mC8ZbeJoe/JrgOwbSIcXCzlsKZThNcFa7EXxNch2BaxDi4WsK1V9BUOMNpgjnClfdrgusQTIsYB1dLOOMxnOE0wThYLEW5KvvXBC0JpkWMg+snnNU0wZwutdxfE7QkmBYxDq6ncMa/JlgknOtfE1yHYFrEOLiewplOEywUbvNfE9ycYFrEOLhGwq0xTVAN7U4SWZ3+miCE85WFbew6wpGivysH4dQKhEux0TRB818T3JxgWsQ4GMIRA+HUCoSjAcKpFQhHQ4Fw01etVkes9Vut1lFv6bD6zXsWlRwKpkWMgyEcMXrhZufdaPq6y1dvOquH51edqP9SRPW5eIJgWsQ0ePFlkSoItxXohRu/jJRq849CO17TRDGbvevJl+mb3vTtF7ktCKZFTIMhHDXFYzhev4RoonO9OeU1TQknTDvvJhXuGYMiY6ckD01q64OAQwqFm1+d8gXvWFmV424x18Ytzun4hRAuHspJgikBpsGocNQUCTc7O002bjqi0B12sxWOyzg+Qpe6URbWsWUaUTKFn1LTnxWYcPFQLT2GiwudJJgWMQ2GcNTohUt841LNP/X4GG686D55d8tGdKhwDrKwji1RiLLRC9cXY7UOq2J8VXSlZ2KhUIO3cSu1M5gWMQ1OhNP8UAOEc0zN/9IA4aiBcAoIRwOEU0A4GiCcAsLRAOEUEI4GCKeAcDRAOAWEowHCKSAcDRBOAeFogHAKCEcDhFNAOBognALC0QDhFBCOBgingHA0QDgFhKMBwikgHA0QTgHhaIBwCghHA4RTQDgaIJwCwtEA4RQQjoaaC5doNoRwJEA4BYSjAcIpIBwNboXbOprteC15jhIoE1Q4BSocDRBOAeFogHAKCEcDhFNAOBognALC0QDhFBCOBgingHA0QDjFMP+PqRDOMRAuZ5U6C+tYp41GC4TLWaXOwjrWaaPRUnPhUpJBOBIgXAyEIwHCxUA4EiBcDIQjAcLFQDgSIFxM/p1fCOcYCBcD4Uiot3BDCEcNhMtbp83CPtZpo9EC4fLWabOwj3XaaLRAuLx12izsY502Gi0QbgGEowDCLYBwFEC4/A3KLOxjnTYaLfUWrt1M7YdwFFRRuCHDLDirGIQjoEA49aP2mbXVw5lj3ltkKBg0BwXKaYXLK3GPZjEctBlmsVYnLootQQQq9MLNrzpR/2V2bfVw9tjKpWpmr5P+mjZFu/Gma2aC4612shT/aTeb/IUvNiGbRLzd5idWL2zBWPqHxDC55UnaccZcd/Em/T/10WvxeGw5LpCgF272rhdN3/RSa6yYHcXb8c4kirN8YaxsEMVpLWnaFq03TLEs3HK+A57U4//zy2k3m2v9O/TUQ7jp2y/R7LybWrs5lcVMCKd2JlHPGFRZg61FL9z4RaySWuMbzLVxi3OqdiZRHNuuwVVwaScOI4uaVjjWo7Zah11dheME0yLVyqIewq2M4YRn8RGzMZy3FqlWFvUQbn51uviUKtfYGG68uAWidiZRnGBapFpZ1EM4dYdNfTxVt9wOu0uHA7sP5zUYwhlQxb80VC4LCKcjmBapVhYQTkcwLVKtLCCcjmBapFpZQDgKSvuzBU7sEwhX5xN7AMLV+cQegHB1PrEHwhUOVBIIB0iBcIAUCAdIgXCAlECFm1+lv5jikOkrOS/D+Xn5dwLZyVudMk7cb7XKSZueQIW76aS+eueQ2Vkn6pdw4jH3gX/zefra7f9PxIn55agKYQq3+HKxa7LfiHfGzeHfWSEa8y+iunVDnnj+sZRq74UwhZu+/Vs5XWpJwkWLr9k7P7n6Aqz7vtoTgQr3qiPccI7oUstQWQnHv3Hv/sS8n65KlQtUuLIKER/X/6mMplPTjc5c+5bMUKrIOC5M4WZ/Lku4qKQBovqU6l4KCEfCTVldKrN45TEpLhA9Xwm+iRPzD+zzT7gtUiLxY0ycM27lPAjKAdyLvngmgWPp4vtw5dyWpCdQ4UBVgXCAFAgHSIFwgBQIB0iBcIAUCBf991++M6gTEG7y/NJ3CnUCwkE4Umot3GT/rw3Oge9EakS9hdvbRYUjpubCnUA4YuotHHcNwpEC4SAcKRAOwpEC4e6PT3znUScgXHTd2PWdSI2otXCAHggHSIFwgBQIB0iBcIAUCAdIgXCAFAgHSIFwgBQIB0j5PxDura/AacjpAAAAAElFTkSuQmCC" width="80%" style="display: block; margin: auto;" /></p>
<p>And of course, this means that all of <code>ggplot</code>’s aesthetic power can be brought to your chromatograms as well, so customize away!</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msdata<span class="sc">$</span>BPC) <span class="sc">+</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>int, <span class="at">color=</span>filename), <span class="at">lwd=</span><span class="dv">1</span>, <span class="at">fill=</span><span class="st">&quot;#FFFFFF44&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.8</span>, <span class="fl">0.7</span>), <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>)) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="st">&quot;250M&quot;</span>, <span class="st">&quot;500M&quot;</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">2.5e8</span>, <span class="fl">5e8</span>)) <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#2596be&quot;</span>, <span class="st">&quot;#6c25be&quot;</span>, <span class="st">&quot;#bea925&quot;</span>)) <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Retention time (minutes)&quot;</span>, <span class="at">y=</span><span class="st">&quot;Intensity&quot;</span>, </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Base peak chromatogram&quot;</span>, <span class="at">color=</span><span class="st">&quot;Files:&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="fl">7.50</span>, <span class="dv">9</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">5e8</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<p><code>RaMS</code> also provides some basic file metadata extraction capability, although the focus for this package is on the actual data and other MS packages handle file metadata much more elegantly. This is one area where there are major differences between mzML and mzXML file types - the mzXML file type simply doesn’t encode as much metadata as the mzML filetype, so <code>RaMS</code> can’t extract it.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Since the minification process strips some metadata, I use the </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># less-minified DDA file here</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">grabMSdata</span>(<span class="at">files =</span> data_files[<span class="dv">1</span>], <span class="at">grab_what =</span> <span class="st">&quot;metadata&quot;</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading file DDApos_2.mzML.gz... 0.39 secs </span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading file metadata...0.13 secs </span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Total time: 0.52 secs</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $metadata</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                   source_file  inst_data       config_data</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 170223_Poo_AllCyanoAqExtracts_DDApos_2.raw None found &lt;data.frame[1x3]&gt;</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    timestamp mslevels polarity         filename</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:      &lt;NA&gt; MS1, MS2 positive DDApos_2.mzML.gz</span></span></code></pre></div>
</div>
<div id="adding-a-column-ms1-data" class="section level3">
<h3>Adding a column: MS1 data</h3>
<p>MS1 data can be extracted just as easily, by supplying “MS1” to the <code>grab_what</code> argument of <code>grabMSdata</code> function.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>msdata <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>], <span class="at">grab_what =</span> <span class="st">&quot;MS1&quot;</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">|=======================</span>                                               <span class="er">|</span>  <span class="dv">33</span>%</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="er">|===============================================</span>                       <span class="er">|</span>  <span class="dv">67</span>%</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Total time: 0.83 secs</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(msdata<span class="sc">$</span>MS1, <span class="dv">3</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">rt</th>
<th align="right">mz</th>
<th align="right">int</th>
<th align="left">filename</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4.000483</td>
<td align="right">204.1246</td>
<td align="right">68815.77</td>
<td align="left">LB12HL_AB.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">4.000483</td>
<td align="right">160.0968</td>
<td align="right">14732.07</td>
<td align="left">LB12HL_AB.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">4.000483</td>
<td align="right">139.0503</td>
<td align="right">180448.22</td>
<td align="left">LB12HL_AB.mzML.gz</td>
</tr>
</tbody>
</table>
<p>So we’ve now got the <em>mz</em> column, corresponding to the mass-to-charge ratio (<em>m/z</em>) of an ion. This means that we can now filter our data for specific masses and separate out molecules with different masses.</p>
<p>Note that this also makes the data much larger in R’s memory - so don’t go loading hundreds of files simultaneously. If that’s necessary, check out the section below on saving space.</p>
<p>Because <code>RaMS</code> returns <a href="https://cran.r-project.org/package=data.table">data.tables</a> rather than normal <code>data.frame</code>s, indexing is super-fast and a bit more intuitive than with base R. Below, I also use the <code>pmppm</code> function from <code>RaMS</code> to produce a mass range from an initial mass and spectrometer accuracy (here, 5 parts-per-million).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>adenine_mz <span class="ot">&lt;-</span> <span class="fl">136.06232</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>adenine_data <span class="ot">&lt;-</span> msdata<span class="sc">$</span>MS1[mz<span class="sc">%between%</span><span class="fu">pmppm</span>(adenine_mz, <span class="at">ppm=</span><span class="dv">5</span>)]</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(adenine_data) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>int, <span class="at">color=</span>filename)) <span class="sc">+</span> <span class="fu">lims</span>(<span class="at">x=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">9</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<p>This makes it easy to grab the data for multiple compounds of interest with a simple loop, provided here by the <code>purrr</code> package of the tidyverse:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>mzs_of_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">adenine=</span><span class="fl">136.06232</span>, <span class="at">valine=</span><span class="fl">118.0865</span>, <span class="at">homarine=</span><span class="fl">138.055503</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>mass_data <span class="ot">&lt;-</span> <span class="fu">imap_dfr</span>(mzs_of_interest, <span class="cf">function</span>(mz_i, name){</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cbind</span>(msdata<span class="sc">$</span>MS1[mz<span class="sc">%between%</span><span class="fu">pmppm</span>(mz_i, <span class="at">ppm=</span><span class="dv">10</span>)], name)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mass_data) <span class="sc">+</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>int, <span class="at">color=</span>filename)) <span class="sc">+</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>name, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">x=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">9</span>))</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1149 row(s) containing missing values (geom_path).</span></span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="moving-along-ms2-data" class="section level3">
<h3>Moving along: MS2 data</h3>
<p><code>RaMS</code> also handles MS<sup>2</sup> data elegantly. Request it with the “MS2” option for <code>grab_what</code>, although it’s often a good idea to grab the MS1 data alongside.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>msdata <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files[<span class="dv">1</span>], <span class="at">grab_what =</span> <span class="st">&quot;everything&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading file DDApos_2.mzML.gz... 0.38 secs </span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading MS1 data...0.3 secs </span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading MS2 data...0.13 secs </span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading BPC...0.18 secs </span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading TIC...0.17 secs </span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading file metadata...0.14 secs </span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Total time: 1.3 secs</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(msdata<span class="sc">$</span>MS2, <span class="dv">3</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">rt</th>
<th align="right">premz</th>
<th align="right">fragmz</th>
<th align="right">int</th>
<th align="right">voltage</th>
<th align="left">filename</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4.008767</td>
<td align="right">104.071</td>
<td align="right">54.06526</td>
<td align="right">1067.209</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">4.008767</td>
<td align="right">104.071</td>
<td align="right">54.45449</td>
<td align="right">1073.694</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">4.008767</td>
<td align="right">104.071</td>
<td align="right">57.03421</td>
<td align="right">2519.131</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
</tbody>
</table>
<p>DDA data can be plotted nicely with <code>ggplot2</code> as well. Typically it makes sense to filter for a precursor mass, then render the fragments obtained.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>homarine_mz <span class="ot">&lt;-</span> <span class="fl">137.047678+1.007276</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>homarine_MS2 <span class="ot">&lt;-</span> msdata<span class="sc">$</span>MS2[premz<span class="sc">%between%</span><span class="fu">pmppm</span>(homarine_mz, <span class="dv">5</span>)]</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>homarine_MS2<span class="sc">$</span>int <span class="ot">&lt;-</span> homarine_MS2<span class="sc">$</span>int<span class="sc">/</span><span class="fu">max</span>(homarine_MS2<span class="sc">$</span>int)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(homarine_MS2) <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>fragmz, <span class="at">y=</span>int)) <span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x=</span>fragmz, <span class="at">xend=</span>fragmz, <span class="at">y=</span>int, <span class="at">yend=</span><span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">5</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;0%&quot;</span>, <span class="st">&quot;50%&quot;</span>, <span class="st">&quot;100%&quot;</span>)) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Fragment m/z&quot;</span>, <span class="at">y=</span><span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<p>This is also the perfect place to enable some interactivity with packages such as <code>plotly</code>, making data exploration not only simple but also highly intuitive.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Not run to save space in the vignette:</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>msdata <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files, <span class="at">grab_what =</span> <span class="fu">c</span>(<span class="st">&quot;MS1&quot;</span>, <span class="st">&quot;MS2&quot;</span>, <span class="st">&quot;BPC&quot;</span>))</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>compound_MS1 <span class="ot">&lt;-</span> msdata<span class="sc">$</span>MS1 <span class="sc">%&gt;%</span> </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mz<span class="sc">%between%</span><span class="fu">pmppm</span>(homarine_mz, <span class="dv">10</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(filename, <span class="st">&quot;DDA&quot;</span>))</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>compound_MS2 <span class="ot">&lt;-</span> msdata<span class="sc">$</span>MS2[premz<span class="sc">%between%</span><span class="fu">pmppm</span>(homarine_mz, <span class="dv">10</span>)] <span class="sc">%&gt;%</span> </span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rt) <span class="sc">%&gt;%</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(int)) <span class="sc">%&gt;%</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">frags=</span><span class="fu">paste</span>(</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="fu">round</span>(fragmz, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(int), <span class="at">sep =</span> <span class="st">&quot;: &quot;</span>), <span class="at">collapse =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>),</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups=</span><span class="st">&quot;drop&quot;</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">int=</span><span class="fu">approx</span>(<span class="at">x =</span> compound_MS1<span class="sc">$</span>rt, <span class="at">y=</span>compound_MS1<span class="sc">$</span>int, <span class="at">xout =</span> rt)<span class="sc">$</span>y)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(compound_MS1) <span class="sc">%&gt;%</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_trace</span>(<span class="at">type=</span><span class="st">&quot;scatter&quot;</span>, <span class="at">mode=</span><span class="st">&quot;lines&quot;</span>, <span class="at">x=</span><span class="sc">~</span>rt, <span class="at">y=</span><span class="sc">~</span>int, <span class="at">color=</span><span class="sc">~</span>filename,</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">hoverinfo=</span><span class="st">&quot;none&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_trace</span>(<span class="at">type=</span><span class="st">&quot;scatter&quot;</span>, <span class="at">mode=</span><span class="st">&quot;markers&quot;</span>, <span class="at">x=</span><span class="sc">~</span>rt, <span class="at">y=</span><span class="sc">~</span>int,</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">text=</span><span class="sc">~</span>frags, <span class="at">hoverinfo=</span><span class="st">&quot;text&quot;</span>, <span class="at">showlegend=</span><span class="cn">FALSE</span>,</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">marker=</span><span class="fu">list</span>(<span class="at">color=</span><span class="st">&quot;black&quot;</span>), <span class="at">data =</span> compound_MS2) <span class="sc">%&gt;%</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">annotations=</span><span class="fu">list</span>(<span class="at">x=</span><span class="fu">min</span>(compound_MS2<span class="sc">$</span>rt), <span class="at">y=</span><span class="fu">median</span>(compound_MS2<span class="sc">$</span>int)<span class="sc">*</span><span class="dv">10</span>, </span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>                          <span class="at">text=</span><span class="st">&quot;Mouse over to see</span><span class="sc">\n</span><span class="st">MSMS fragments&quot;</span>))</span></code></pre></div>
<p>Easy access to MS<sup>2</sup> data also allows us to rapidly perform simple operations such as searching for a specific fragment mass. For example, if we know that homarine typically produces a fragment with a mass of 94.06567, we simply subset the MS<sup>2</sup> data for fragments in a range around that mass:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>homarine_frag_mz <span class="ot">&lt;-</span> <span class="fl">94.06567</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>msdata<span class="sc">$</span>MS2[fragmz<span class="sc">%between%</span><span class="fu">pmppm</span>(homarine_frag_mz, <span class="at">ppm =</span> <span class="dv">5</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">rt</th>
<th align="right">premz</th>
<th align="right">fragmz</th>
<th align="right">int</th>
<th align="right">voltage</th>
<th align="left">filename</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4.202267</td>
<td align="right">138.0550</td>
<td align="right">94.06548</td>
<td align="right">2639.737</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">4.561233</td>
<td align="right">138.0550</td>
<td align="right">94.06560</td>
<td align="right">4301.696</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">4.900883</td>
<td align="right">138.0550</td>
<td align="right">94.06550</td>
<td align="right">1678.091</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">5.719433</td>
<td align="right">138.0550</td>
<td align="right">94.06572</td>
<td align="right">32145.883</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">5.832950</td>
<td align="right">139.0520</td>
<td align="right">94.06569</td>
<td align="right">698355.375</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">6.063700</td>
<td align="right">138.0549</td>
<td align="right">94.06567</td>
<td align="right">15944193.000</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
</tbody>
</table>
<p>We find that there’s not only homarine that produces that fragment, but at least one other compound. Precursor masses like this can then be searched manually in online databases or, since the data is already in R, passed to a script that automatically queries them.</p>
<p>Similarly, we can easily search instead for neutral losses with this method. If we suspect other molecules are producing a similar neutral loss as homarine:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>homarine_neutral_loss <span class="ot">&lt;-</span> homarine_mz <span class="sc">-</span> homarine_frag_mz</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>msdata<span class="sc">$</span>MS2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(msdata<span class="sc">$</span>MS2, <span class="at">neutral_loss=</span>premz<span class="sc">-</span>fragmz) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;rt&quot;</span>, <span class="st">&quot;premz&quot;</span>, <span class="st">&quot;fragmz&quot;</span>, <span class="st">&quot;neutral_loss&quot;</span>, <span class="st">&quot;int&quot;</span>, <span class="st">&quot;voltage&quot;</span>, <span class="st">&quot;filename&quot;</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>msdata<span class="sc">$</span>MS2[neutral_loss<span class="sc">%between%</span><span class="fu">pmppm</span>(homarine_neutral_loss, <span class="at">ppm =</span> <span class="dv">5</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(int)) <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">rt</th>
<th align="right">premz</th>
<th align="right">fragmz</th>
<th align="right">neutral_loss</th>
<th align="right">int</th>
<th align="right">voltage</th>
<th align="left">filename</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">6.063700</td>
<td align="right">138.0549</td>
<td align="right">94.06567</td>
<td align="right">43.98918</td>
<td align="right">15944193.0</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">6.399933</td>
<td align="right">138.0549</td>
<td align="right">94.06569</td>
<td align="right">43.98921</td>
<td align="right">11094394.0</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">8.438167</td>
<td align="right">138.0549</td>
<td align="right">94.06567</td>
<td align="right">43.98921</td>
<td align="right">1218680.0</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">11.810417</td>
<td align="right">104.0710</td>
<td align="right">60.08154</td>
<td align="right">43.98949</td>
<td align="right">556172.8</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">11.469117</td>
<td align="right">104.0710</td>
<td align="right">60.08154</td>
<td align="right">43.98947</td>
<td align="right">509088.7</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">6.739650</td>
<td align="right">138.0550</td>
<td align="right">94.06568</td>
<td align="right">43.98931</td>
<td align="right">334129.3</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
</tbody>
</table>
<p>We can again confirm our suspicions that there’s another signal with a similar neutral loss: one with a mass of 104.0710.</p>
</div>
</div>
<div id="advanced-rams-usage" class="section level2">
<h2>Advanced RaMS usage</h2>
<p>The sections below will likely be of interest to users who are already familiar with <code>RaMS</code> and are looking to optimize speed, reduce memory requirements, or are otherwise interested in the details of what <code>RaMS</code> does under the hood. If you’re just getting started, I strongly recommend applying <code>RaMS</code> to your own data before you read on.</p>
<div id="saving-space-eics-and-rtrange" class="section level3">
<h3>Saving space: EICs and rtrange</h3>
<p>Mass-spec files are typically tens or hundreds of megabytes in size, which means that the simultaneous analysis of many files can easily exceed a computer’s memory. Since <code>RaMS</code> stores all data in R’s working memory, this can become a problem for large analyses.</p>
<p>However, much of the usage envisioned for <code>RaMS</code> on this scale doesn’t require access to the entire file, the entire time. Instead, users are typically interested in a few masses of interest or a specific time window. This means that while each file still needs to be read into R in full to find the data of interest, extraneous data can be discarded before the next file is loaded.</p>
<p>This functionality can be enabled by passing “EIC” and/or “EIC_MS2” to the <code>grab_what</code> argument of <code>grabMSdata</code>, along with a vector of masses to extract (mz) and the instrument’s ppm accuracy. When this is enabled, files are read into R’s memory sequentially, the mass window is extracted, and the rest of the data is discarded.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files, <span class="at">grab_what =</span> <span class="fu">c</span>(<span class="st">&quot;MS1&quot;</span>, <span class="st">&quot;MS2&quot;</span>))</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">|==================</span>                                                    <span class="er">|</span>  <span class="dv">25</span>%</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="er">|===================================</span>                                   <span class="er">|</span>  <span class="dv">50</span>%</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="er">|====================================================</span>                  <span class="er">|</span>  <span class="dv">75</span>%</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Total time: 1.73 secs</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>mzs_of_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">adenine=</span><span class="fl">136.06232</span>, <span class="at">valine=</span><span class="fl">118.0865</span>)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>small_data <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files, <span class="at">grab_what =</span> <span class="fu">c</span>(<span class="st">&quot;EIC&quot;</span>, <span class="st">&quot;EIC_MS2&quot;</span>),</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>                         <span class="at">mz=</span>mzs_of_interest, <span class="at">ppm =</span> <span class="dv">5</span>)</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="er">|==================</span>                                                    <span class="er">|</span>  <span class="dv">25</span>%</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>  <span class="er">|===================================</span>                                   <span class="er">|</span>  <span class="dv">50</span>%</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="er">|====================================================</span>                  <span class="er">|</span>  <span class="dv">75</span>%</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Total time: 1.65 secs</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>all_data<span class="sc">$</span>MS1 <span class="sc">%&gt;%</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type=</span><span class="st">&quot;All data&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(small_data<span class="sc">$</span>EIC <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">type=</span><span class="st">&quot;Extracted data only&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(filename, <span class="st">&quot;DDA&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rt<span class="sc">%between%</span><span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">15</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rt, filename, type) <span class="sc">%&gt;%</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">TIC=</span><span class="fu">sum</span>(int), <span class="at">.groups=</span><span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>TIC, <span class="at">color=</span>filename)) <span class="sc">+</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Size reduction factor:</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">object.size</span>(all_data)<span class="sc">/</span><span class="fu">object.size</span>(small_data))</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 20.02519</span></span></code></pre></div>
<p>As expected, the size of the <code>small_data</code> object is much smaller than the <code>all_data</code> object, here by a factor of about 15x. For files that haven’t already been “minified”, that size reduction will be even more significant. Of course, this comes with the cost of needing to re-load the data a second time if a new mass feature becomes of interest but this shrinkage is especially valuable for targeted analyses where the analytes of interest are known in advance.</p>
<p>A second way of reducing file size is to constrain the retention time dimension rather than the m/z dimension. This can be done with the <code>rtrange</code> argument, which expects a length-two vector corresponding to the upper and lower bounds on retention time. This is useful when a small time window is of interest, and only the data between those bounds is relevant. Below, peaks are deliberately sliced in half to show that this is filtering on retention time instead of mass.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>small_data <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files, <span class="at">grab_what =</span> <span class="fu">c</span>(<span class="st">&quot;MS1&quot;</span>, <span class="st">&quot;MS2&quot;</span>), <span class="at">rtrange =</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">8</span>))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">|==================</span>                                                    <span class="er">|</span>  <span class="dv">25</span>%</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="er">|===================================</span>                                   <span class="er">|</span>  <span class="dv">50</span>%</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="er">|====================================================</span>                  <span class="er">|</span>  <span class="dv">75</span>%</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Total time: 1.31 secs</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>all_data<span class="sc">$</span>MS1 <span class="sc">%&gt;%</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type=</span><span class="st">&quot;All data&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(small_data<span class="sc">$</span>MS1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">type=</span><span class="st">&quot;Extracted data only&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(filename, <span class="st">&quot;DDA&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rt, filename, type) <span class="sc">%&gt;%</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">TIC=</span><span class="fu">sum</span>(int), <span class="at">.groups=</span><span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>TIC, <span class="at">color=</span>filename)) <span class="sc">+</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Size reduction factor:</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">object.size</span>(all_data)<span class="sc">/</span><span class="fu">object.size</span>(small_data))</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5.654536</span></span></code></pre></div>
<p>The savings are also worth noting here, but constraining the retention time also speeds up data retrieval slightly. Since <em>m/z</em> and intensity data is encoded in mzML and mzXML files while retention time information is not, eliminating scans with a retention time window removes the need to decode the intensity and <em>m/z</em> information in those scans.</p>
<p>However, decoding is rarely the rate-limiting step and for more information about speeding things up, continue to the next section.</p>
</div>
<div id="speeding-things-up" class="section level3">
<h3>Speeding things up</h3>
<p>So, <code>RaMS</code> isn’t fast enough for you? Let’s see what we can do to improve that. The first step in speeding things up is discovering what’s slow. Typically, this is the process of reading in the mzML/mzXML file rather than any processing that occurs afterward, but this is not always the case. To examine bottlenecks, <code>RaMS</code> includes timing information that’s produced if the <code>verbosity</code> argument is set to 2 or higher.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files, <span class="at">grab_what =</span> <span class="fu">c</span>(<span class="st">&quot;MS1&quot;</span>, <span class="st">&quot;MS2&quot;</span>), <span class="at">verbosity =</span> <span class="dv">2</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading file DDApos_2.mzML.gz... 0.43 secs </span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading MS1 data...0.31 secs </span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading MS2 data...0.14 secs </span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="er">|==================</span>                                                    <span class="er">|</span>  <span class="dv">25</span>%</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading file LB12HL_AB.mzML.gz... 0.13 secs </span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading MS1 data...0.12 secs </span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading MS2 data...0.01 secs </span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="er">|===================================</span>                                   <span class="er">|</span>  <span class="dv">50</span>%</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading file LB12HL_CD.mzML.gz... 0.12 secs </span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading MS1 data...0.14 secs </span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading MS2 data...0.01 secs </span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>  <span class="er">|====================================================</span>                  <span class="er">|</span>  <span class="dv">75</span>%</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading file LB12HL_EF.mzML.gz... 0.12 secs </span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading MS1 data...0.11 secs </span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading MS2 data...0.01 secs </span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Total time: 1.67 secs</span></span></code></pre></div>
<p>In general, slow file read times can be improved by compressing the data. mzML files are highly compressible, with options to compress both the data itself using the <code>zlib</code> method and the files as a whole using <code>gzip</code>.</p>
<p><code>gzip</code> is the simplest one to use, as a plethora of methods exist to compress files this way, including online sites. <code>RaMS</code> can read the data directly from a gzipped file, no decompression necessary, so this is an easy way to reduce file size and read times. Sharp-eyed users will have noticed that the demo files are already gzipped, which is part of the reason they are so small.</p>
<p><code>zlib</code> compression is slightly trickier, and is most often performed with tools such as <a href="http://proteowizard.sourceforge.net/doc_users.html">Proteowizard</a>’s <code>msconvert</code> tool with the option “-z”.</p>
<p>Read times may also be slow if files are being accessed via the Internet, either through a VPN or network drive. If your files are stored elsewhere, consider first moving those files somewhere more local before reading data from them.</p>
<p>If the bottleneck appears when reading MS<sup>1</sup> data, consider restricting the retention time range with the <code>rtrange</code> argument or using more detailed profiling tools such as RStudio’s “Profile” options or the <code>profvis</code> package. Pull requests that improve data processing speed are always welcome!</p>
<p>While the package is not currently set up for parallel processing, this is a potential future feature if a strong need is demonstrated.</p>
</div>
<div id="finer-control-grabmzmldata-grabmzxmldata" class="section level3">
<h3>Finer control: grabMzmlData, grabMzxmlData</h3>
<p>While there’s only one main function (<code>grabMSdata</code>) in <code>RaMS</code>, you may have noticed that two other functions have been exposed that perform similar tasks: <code>grabMzmlData</code> and <code>grabMzxmlData</code>. The main function <code>grabMSdata</code> serves as a wrapper around these two functions, which detects the file type, adds the “filename” column to the data, and loops over multiple files if provided. However, there’s often reason to use these internal functions separately.</p>
<p>For one, the objects themselves are smaller because they don’t have the filename column attached yet. You as the user will need to keep track of which data belongs to which files in this case.</p>
<p>Another use case might be applying functions to each file individually, perhaps aligning to a reference chromatogram or identifying peaks. Rather than spending the time to bind the files together and immediately separate them again, these functions have been exposed to skip that step.</p>
<p>Finally, these functions are useful for parallelization. Because iterating over each mass-spec file is often the largest reasonable chunk, these functions can be passed directly to parallel processes like <code>mclapply</code> or <code>doParallel</code>. However, parallelization is a beast best handled by individual users because its actual implementation often differs wildly and its utility depends strongly on individual setups (remember that parallelization won’t help with slow I/O times, so it may not always improve data processing speed.)</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Not run:</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(parallel)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>cl <span class="ot">&lt;-</span> <span class="fu">makeCluster</span>(<span class="fu">getOption</span>(<span class="st">&quot;cl.cores&quot;</span>, <span class="fu">detectCores</span>()<span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>output_data <span class="ot">&lt;-</span> <span class="fu">parLapply</span>(data_files, grabMzmlData, <span class="at">grab_what=</span><span class="st">&quot;everything&quot;</span>, <span class="at">cl =</span> cl)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(foreach)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doParallel)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">registerDoParallel</span>(<span class="fu">detectCores</span>()<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>output_data <span class="ot">&lt;-</span> <span class="fu">foreach</span> (<span class="at">i=</span>data_files) <span class="sc">%dopar%</span> {</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  RaMS<span class="sc">::</span><span class="fu">grabMzmlData</span>(i, <span class="at">grab_what=</span><span class="st">&quot;everything&quot;</span>)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="fu">stopImplicitCluster</span>()</span></code></pre></div>
</div>
<div id="the-nitty-gritty-details" class="section level3">
<h3>The nitty-gritty details</h3>
<p><code>RaMS</code> is possible because mzML and mzXML documents are fundamentally <a href="https://en.wikipedia.org/wiki/XML">XML</a>-based. This means that we can leverage speedy and robust XML parsing packages such as <code>xml2</code> to extract the data. Fundamentally, <code>RaMS</code> relies on <a href="https://www.w3schools.com/xml/xpath_intro.asp">XPath</a> navigation to collect various bits of mass-spec data, and the format of mzML and mzXML files provides the tags necessary. That means a lot of <code>RaMS</code> code consists of lines like the following:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Not run:</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>data_nodes <span class="ot">&lt;-</span> xml2<span class="sc">::</span><span class="fu">xml_find_all</span>(mzML_nodes, <span class="at">xpath=</span><span class="st">&quot;//d1:precursorMz&quot;</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> xml2<span class="sc">::</span><span class="fu">xml_attr</span>(data_nodes, <span class="st">&quot;value&quot;</span>)</span></code></pre></div>
<p>…plus a lot of data handling to get the output into the tidy format.</p>
<p>The other tricky bit of data extraction is converting the (possibly compressed) binary data into R-friendly objects. This is usually handled with code like that shown below. Many of the settings can be deduced from the file, but sometimes compression types need to be guessed at and will throw a warning if so.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Not run:</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>decoded_binary <span class="ot">&lt;-</span> base64enc<span class="sc">::</span><span class="fu">base64decode</span>(binary)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>raw_binary <span class="ot">&lt;-</span> <span class="fu">as.raw</span>(decoded_binary)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>decomp_binary <span class="ot">&lt;-</span> <span class="fu">memDecompress</span>(raw_binary, <span class="at">type =</span> file_metadata<span class="sc">$</span>compression)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>final_binary <span class="ot">&lt;-</span> <span class="fu">readBin</span>(decomp_binary, <span class="at">what =</span> <span class="st">&quot;double&quot;</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">n=</span><span class="fu">length</span>(decomp_binary)<span class="sc">/</span>file_metadata<span class="sc">$</span>mz_precision,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">size =</span> file_metadata<span class="sc">$</span>mz_precision)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># See https://github.com/ProteoWizard/pwiz/issues/1301</span></span></code></pre></div>
<p>Fundamentally, mass-spectrometry data is formatted as a <a href="https://en.wikipedia.org/wiki/Jagged_array">ragged array</a>, with an unknown number of <em>m/z</em> and intensity values for a given scan. This makes it difficult to encode neatly without interpolating, but tidy data provides a solution by stacking those arrays rather than aligning them into some sort of matrix.</p>
<p>This ragged shape is also the reason that subsetting mass-spec data by retention time is trivial - grab the scans that correspond to the desired retention times and you’re done. Subsetting by mass, on the other hand, requires decoding each and every scan’s <em>m/z</em> and intensity data. If you’re reading a book and only want a couple chapters, it’s easy to flip to those sections. If you’re looking instead for every time a specific word shows up, you’ve gotta read the whole thing.</p>
<p>For more information about the mzML data format and its history, check out the specification at <a href="https://www.psidev.info/mzML" class="uri">https://www.psidev.info/mzML</a>.</p>
<hr />
<p>Vignette last built on 2022-04-08</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
